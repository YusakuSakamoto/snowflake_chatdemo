# [[design.RAW_DATA]] ステージ

## 概要

RAW_DATAは、APP_PRODUCTIONスキーマ内に定義された内部ステージであり、加工前の生データを一時的に格納するための領域として利用される。Snowflakeのマネージドストレージを使用し、暗号化された安全な環境でファイルを保管する。

## 業務上の意味

データ処理パイプラインにおいて、外部から取り込んだファイルや加工前の生データを一時的に保管する役割を担う。このステージを経由することで、データの取り込み処理とテーブルへのロード処理を分離し、処理の柔軟性と再実行可能性を確保する。

## 設計上の位置づけ

APP_PRODUCTIONスキーマの内部ステージとして位置づけられ、本番データの入り口となる。外部ステージとは異なり、Snowflake管理下のストレージを使用するため、追加の認証設定や外部統合は不要である。

ディレクトリテーブル機能を有効化しており、ステージ内のファイルメタデータを自動的に管理・追跡できる。

## 機能

- ファイルのアップロードと一時保管
- Snowflake SSEによる暗号化
- ディレクトリテーブルによるファイルメタデータの自動管理
- ファイルからテーブルへのCOPY処理のソースとして機能

## パラメータ

- ENCRYPTION: Snowflake管理の暗号化（`SNOWFLAKE_SSE`）を使用
- DIRECTORY: ディレクトリテーブル機能を有効化（ENABLE = TRUE）

## 利用シーン

- CSVやJSONなどの生データファイルをSnowflakeに取り込む際の一時保管場所
- データ取り込みバッチ処理の入力ステージ
- ファイルベースのデータ連携における中間保管領域
- データロード前の検証やプレビュー
