# [[OBSIDIAN_VAULT_STAGE]] 外部ステージ

## 概要

OBSIDIAN_VAULT_STAGEは、DB_DESIGNスキーマ内に定義された外部ステージであり、AWS S3バケットに格納されたObsidian VaultのMarkdownファイル群にアクセスするための接続設定である。S3統合を利用してセキュアにS3データへアクセスする。

## 業務上の意味

Obsidianで管理されているドキュメント資産をSnowflake上で直接参照・分析できるようにする役割を担う。ドキュメントベースのナレッジベースやメタデータをデータベース設計に活用し、設計書の内容を構造化データとして処理可能にする。

## 設計上の位置づけ

DB_DESIGNスキーマの外部ステージとして位置づけられ、S3に保管されたObsidian Vaultドキュメントへのアクセスポイントとなる。S3_OBSIDIAN_INTストレージ統合を通じて認証とアクセス制御を実現する。

このステージを介して、外部テーブルやファイル形式定義を組み合わせることで、Markdownファイルの内容をクエリ可能な形式として扱える。

## 機能

- S3バケット（135365622922-snowflake-dbdesign）への接続
- ストレージ統合（S3_OBSIDIAN_INT）を使用したセキュアなアクセス
- Obsidian VaultのMarkdownファイル群への読み取りアクセス
- 外部テーブル定義のソースステージとして機能

## パラメータ

- URL: S3バケットのパス（s3://135365622922-snowflake-dbdesign/）
- [[STORAGE_INTEGRATION]]: 認証に使用するストレージ統合名（S3_OBSIDIAN_INT）

## 利用シーン

- Obsidian Vaultドキュメントの内容をSnowflake上で検索・分析
- 設計書やドキュメントのメタデータ抽出
- ドキュメント駆動型の開発支援
- Cortex AIを使用したドキュメント内容の意味検索
- ナレッジベースとしてのドキュメント資産の活用
